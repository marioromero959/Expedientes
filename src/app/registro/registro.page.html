<ion-header>
  <ion-toolbar color="secondary">
    <ion-title>Registrate</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <h1>Crea tu cuenta</h1>
  <form [formGroup]= "crearUsuarios"
  (ngSubmit)= "registrarUsuario()">
    <ion-item lines="inset">
      <ion-label position="floating">Usuario</ion-label>
      <ion-input type="text"
      formControlName="usuario"
      autocomplete="on"
      ></ion-input>
    </ion-item>
    <div *ngIf= "usuarioField.errors && usuarioField.touched">
      <p *ngIf= "usuarioField.hasError('required')">Este campo es requerido</p>
    </div>
    <p *ngIf= "errores[0]">Este usuario ya se encuentra en uso</p>
    <ion-item lines="inset">
      <ion-label position="floating">DNI</ion-label>
      <ion-input type="number" 
      formControlName="dni"
      autocomplete="on"></ion-input>
    </ion-item>
    <div *ngIf= "dniField.errors && dniField.touched">
      <p *ngIf= "dniField.hasError('required')">Este campo es requerido</p>
    </div>
    <p *ngIf= "errores[1]">Este DNI ya se encuentra registrado</p>
    <ion-item lines="inset">
      <ion-label position="floating">Nombres</ion-label>
      <ion-input type="text" 
      formControlName="nombre"
      autocomplete="on"></ion-input>
    </ion-item>
    <div *ngIf= "nombreField.errors && nombreField.touched">
      <p *ngIf= "nombreField.hasError('required')">Este campo es requerido</p>
    </div>
    <ion-item lines="inset">
      <ion-label position="floating">Apellidos</ion-label>
      <ion-input type="text"
      formControlName="apellido"
      autocomplete="on"></ion-input>
    </ion-item>
    <div *ngIf= "apellidoField.errors && apellidoField.touched">
      <p *ngIf= "apellidoField.hasError('required')">Este campo es requerido</p>
    </div>
    <ion-item lines="inset">
      <ion-label position="floating">Email</ion-label>
      <ion-input type="text" 
      formControlName="email"
      autocomplete="on"
      ></ion-input>
    </ion-item>
    <div *ngIf="emailField.errors && emailField.touched">
      <p *ngIf= "emailField.hasError('required')">Este campo es requerido</p>
      <p *ngIf= "emailField.hasError('email')">Este campo no es un email v치lido</p>
    </div>
    <p *ngIf= "errores[2]">Este email ya se encuentra en uso</p>
    <ion-item lines="inset">
      <ion-label position="floating">Contrase침a</ion-label>
      <ion-input 
      [type]= "showPassword ? 'text' : 'password'"
      formControlName="pass"
      name= "pass"
      ></ion-input>
      <ion-icon slot="end" class="ion-icon" [name]="passwordToggleIcon" (click)="togglePass()"></ion-icon>
    </ion-item>
    <div *ngIf= "passwordField.errors && passwordField.touched">
      <p *ngIf= "passwordField.hasError('required')">Este campo es requerido</p>
    </div>
    <ion-item lines="inset">
      <ion-label position="floating">Repetir Contrase침a</ion-label>
      <ion-input 
      [type]= "showRePassword ? 'text' : 'password'"
      formControlName="repass"
      name= "repass
    "
      ></ion-input>
      <ion-icon slot="end" class="ion-icon" [name]="rePasswordToggleIcon" (click)="toggleRePass()"></ion-icon>
    </ion-item>
    <div *ngIf= "repasswordField.errors && repasswordField.touched">
      <p *ngIf= "repasswordField.hasError('required')">Este campo es requerido</p>
    </div>
    <div *ngIf= "passwordField.valid && repasswordField.value !== passwordField.value && repasswordField.touched">
      <p>Las contrase침as no coinciden</p>
    </div>
    <ion-row class="ion-justify-content-center">
        <ion-button
        type="submit"
        shape=round
        color="success">
          Registrarse
        </ion-button>
    </ion-row>
    
    <ion-row class="ion-justify-content-center">
      <ion-button
      type="button"
      shape=round
      (click)= "irALogin()">
      Ya tengo cuenta
    </ion-button>
  </ion-row>
</form>

</ion-content>
